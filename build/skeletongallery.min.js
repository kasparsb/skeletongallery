!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.webit||(e.webit={})).skeletonGallery=t()}}(function(){return function t(e,i,n){function s(r,h){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){var n=t("underscore"),s={},o={on:function(t,e){t=this.normalizeEventName(t),"undefined"==typeof s[t]&&(s[t]=[]),s[t].push(e)},trigger:function(t){var e=this.getListeners(t);for(var i in e)e[i].apply(this,n.getArguments(1,arguments))},triggerWithCallback:function(t,e){var i=this.getListeners(t),s=n.after(i.length,e),o=n.getArguments(2,arguments);o.unshift(s);for(var r in i)i[r].apply(this,o)},triggerFirst:function(t){var e=this.getListeners(t);e.length>0&&e[0].apply(this,n.getArguments(1,arguments))},getListeners:function(t){return t=this.normalizeEventName(t),"undefined"!=typeof s[t]?s[t]:[]},isListeners:function(t){return this.getListeners(t).length>0},normalizeEventName:function(t){var e=t.split(".");return 1==e.length&&e.unshift(this.name),e.join(".")}};e.exports=o},{underscore:10}],2:[function(t,e,i){var n=t("underscore");n.jQuery(jQuery),e.exports={viewer:t("./viewer"),thumbnails:t("./thumbnails"),navigation:t("./navigation")}},{"./navigation":5,"./thumbnails":8,"./viewer":9,underscore:10}],3:[function(t,e,i){var n=t("underscore"),s=t("./media"),o=function(t){this.natural={width:0,height:0},this.src=t.src,this.construct()};o.prototype=n.extend(s,{create:function(){var t=n.createEl("img");return n.attr(t,"src",this.src),t},checkIsLoaded:function(){return this.readDimensions(),this.natural.width>0||this.natural.height>0?(this.setIsLoaded(),!0):(n.on(this.el,"load",n.bind(this.checkIsLoaded,this)),!1)},readDimensions:function(){this.natural={width:this.el.width,height:this.el.height}}}),e.exports=o},{"./media":4,underscore:10}],4:[function(t,e,i){var n=t("underscore"),s=t("./events"),o=n.extend({construct:function(t){this.name="media",this.props=t,this.loading=!1,this.loaded=!1,this.mounted=!1,this.el=!1},load:function(){this.el||(this.loading=!0,this.trigger("beforeload",this),this.el=this.create(),this.checkIsLoaded())},create:function(){console.warn("Define media create method")},checkIsLoaded:function(){console.warn("Define media checkIsLoaded method")},setIsLoaded:function(){this.loading=!1,this.loaded=!0,this.trigger("load",this)},isLoaded:function(){return this.loaded},mount:function(t,e,i,s,o){this.mounted||(n.append(t,this.el),this.mounted=!0),this.setDimensions(e,i,s,o)},setDimensions:function(t,e,i,s){var o={width:t,height:e,maxWidth:i,maxHeight:s};n.css(this.el,o),this.readRealDimensions()},readRealDimensions:function(){this.width=n.width(this.el),this.height=n.height(this.el)}},s);e.exports=o},{"./events":1,underscore:10}],5:[function(t,e,i){var n=t("underscore"),s=function(t){this.viewer=t.viewer,this.next=t.next,this.prev=t.prev,this.setEvents()};s.prototype={setEvents:function(){n.on(this.next,"click",n.bind(function(t){t.preventDefault(),this.viewer.next()},this)),n.on(this.prev,"click",n.bind(function(t){t.preventDefault(),this.viewer.prev()},this)),n.on(window,"keyup",n.bind(function(t){switch(t.keyCode){case 39:this.viewer.next();break;case 37:this.viewer.prev()}},this))}},e.exports=s},{underscore:10}],6:[function(t,e,i){var n=t("underscore"),s=t("./events"),o=t("./media-image"),r=function(t){this.name="slide";var e={loadingCssClass:"slide-loading",type:"image",src:"",width:"100%",height:"auto",maxWidth:"",maxHeight:"",verticalAlign:"top",horizontalAlign:"center"};this.props=n.extend(e,t),this.loadingCssClass=this.props.loadingCssClass,this.media=new o({src:this.props.src}),this.media.slide=this,this.setMediaEvents(),this.mounted=!1,this.el=this.create()};r.prototype=n.extend({create:function(){var t={maxWidth:"100%",maxHeight:"100%",height:"100%",width:"100%",overflow:"hidden",position:"relative"},e=n.createEl("div");return n.addClass(e,"slide"),n.css(e,t),e},setMediaEvents:function(){this.media.on("beforeload",n.bind(function(){this.setLoadingState(!0)},this)),this.media.on("load",n.bind(function(){"function"==typeof this.mountMediaLoadCallback&&this.mountMediaLoadCallback()},this))},loadMedia:function(){this.media.load()},mount:function(t){this.mounted||(n.append(t,this.el),this.mounted=!0,this.media.isLoaded()?this.mountMedia():(this.mountMediaLoadCallback=n.bind(this.mountMedia,this),this.media.load()))},unmount:function(){"undefined"!=typeof this.mountMediaLoadCallback&&delete this.mountMediaLoadCallback,this.mounted&&(n.remove(this.el),this.mounted=!1)},mountMedia:function(){if(this.mounted){var t=n.bind(function(){this.media.mount(this.el,this.props.width,this.props.height,this.props.maxWidth,this.props.maxHeight),this.beforeAlignMedia(e)},this),e=n.bind(function(){this.afterMount(i)},this),i=n.bind(function(){this.setLoadingState(!1),this.trigger("mount",this)},this);this.beforeMount(t)}},beforeMount:function(t){var e={position:"absolute",display:"block"};this.isListeners("beforemount")?this.triggerWithCallback("beforemount",t,this,n.clone(e)):(n.css(this.media.el,e),t())},afterMount:function(t){this.isListeners("aftermount")?this.triggerWithCallback("aftermount",t,this):t()},beforeAlignMedia:function(t){this.isListeners("beforealignmedia")?this.triggerWithCallback("beforealignmedia",t,this):this.alignMedia(t)},alignMedia:function(t){var e={};e=this.align.y[this.props.verticalAlign](e,this.media),e=this.align.x[this.props.horizontalAlign](e,this.media),n.css(this.media.el,e),"function"==typeof t&&t()},resize:function(){this.media.setDimensions(this.props.width,this.props.height,this.props.maxWidth,this.props.maxHeight),this.alignMedia()},setLoadingState:function(t){n[t?"addClass":"removeClass"](this.el,this.loadingCssClass)},align:{x:{left:function(t,e){return t.left=0,t},right:function(t,e){return t.right=0,t},center:function(t,e){return t.left="50%",t.marginLeft=-(e.width/2),t}},y:{top:function(t,e){return t.top=0,t},bottom:function(t,e){return t.bottom=0,t},center:function(t,e){return t.top="50%",t.marginTop=-(e.height/2),t}}}},s),e.exports=r},{"./events":1,"./media-image":3,underscore:10}],7:[function(t,e,i){var n=t("underscore"),s=t("./events"),o=t("./slide"),r=(t("./media-image"),function(t,e){this.preloadThreshold=2,this.active=!1,this.rotate=!0,this.viewer=e,this.setEvents(),this.items=this.create(t),this.length=this.items.length});r.prototype=n.extend({create:function(t){return t.map(function(t,e){return this.createItem(t,e)},this)},createItem:function(t,e){var i=new o(n.extend(n.clone(this.viewer.slideDefaultProps),"object"==typeof t?t:{src:t}));return i.index=e,n.addClass(i.el,"slide-"+i.index),i},setEvents:function(){var t=n.bind(this.handlePreload,this);this.on("media.load",t),this.viewer.on("change",t)},handlePreload:function(){var t=function(t){var e=!1;return n.each(t,function(t){return t.media.loaded||t.media.loading?void 0:(t.media.load(),e=!0,!1)}),e},e=this.active?this.active.index:0,i=t(this.get(e,this.preloadThreshold));!i&&this.rotate&&t(this.get(e,-this.preloadThreshold))},isActive:function(t){return t.index==this.active.index},setActive:function(t){this.active=t},get:function(t,e){return t=n.normalizeIndex(t,this.length),"undefined"!=typeof e?n.ranger(t,t+e,function(t){return this.items[n.normalizeIndex(t,this.length)]},this):this.items[t]},getByOffset:function(t){return this.get(n.checkBoundry(this.active?this.active.index+t:0,this.length,this.rotate))},getNext:function(){return this.getByOffset(1)},getPrev:function(){return this.getByOffset(-1)}},s),e.exports=r},{"./events":1,"./media-image":3,"./slide":6,underscore:10}],8:[function(t,e,i){var n=t("underscore"),s=t("./events"),o=function(t){this.name="thumbnails",this.props=t,this.el=this.create(),this.items=this.createItems(t.items),this.setEvents()};o.prototype=n.extend({setEvents:function(){this.props.viewer&&this.props.viewer.on("change",n.bind(this.handleChange,this)),this.props.next&&n.on(this.props.next,"click",n.bind(function(t){t.preventDefault(),this.next()},this)),this.props.prev&&n.on(this.props.prev,"click",n.bind(function(t){t.preventDefault(),this.prev()},this))},handleChange:function(){},create:function(){n.createEl("div")},createItems:function(t){t.map(function(t){var e=this.props.formatter.call(this,t);n.append(this.el,e)},this)}},s),e.exports=o},{"./events":1,underscore:10}],9:[function(t,e,i){var n=t("underscore"),s=t("./events"),o=t("./slides"),r=function(t,e){this.name="viewer",this.props=n.extend({handleWindowResize:!1,rotate:!1,autoStart:!1,checkSlidesTransitionInProgress:!0},t),this.items=e,this.slideDefaultProps=this.props.slideDefault||{},this.container=t.container,this.el=this.create(),this.slidesTransitionInProgress=!1,this.preloadThreshold=2,this.mountQueue=[],this.init()};r.prototype=n.extend({init:function(){this.slides=new o(this.items,this),this.slides.rotate=this.props.rotate,this.slides.preloadThreshold=this.preloadThreshold,this.setEvents(),this.props.autoStart&&this.first()},setEvents:function(){this.props.handleWindowResize&&n.on(window,"resize",n.debounce(this.handleWindowResize,100,this))},handleWindowResize:function(){this.resize()},create:function(){var t=n.createEl("div"),e={display:"block",position:"relative",overflow:"hidden",height:n.height(this.container)};return n.css(t,e),n.append(this.container,t),t},mountSlide:function(t){t.mount(this.el)},unmountSlide:function(t){this.dequeueSlide(t),t.unmount()},queueSlide:function(t){this.mountQueue.push(t),this.setSlidesMountIndexes()},dequeueSlide:function(t){var e=-1;for(var i in this.mountQueue)if(this.mountQueue[i].index==t.index){e=i;break}e>=0&&this.mountQueue.splice(e,1),delete t.mountIndex,this.setSlidesMountIndexes()},setSlidesMountIndexes:function(){for(var t=0;t<this.mountQueue.length;t++)this.mountQueue[t].mountIndex=t},handleSlideMountEvent_mount:function(t){this.slides.isActive(t)&&n.css(this.el,{height:t.media.height})},handleDefaultSlideTransition:function(t,e,i,n){t&&this.unmountSlide(t),e&&this.mountSlide(e),n()},handleSlidesTransition:function(t,e,i){this.queueSlide(e);var s=n.bind(function(){this.slidesTransitionInProgress=!1,this.trigger("change")},this);this.slidesTransitionInProgress=!0,this.isListeners("slidetransition")?this.triggerFirst("slidetransition",t,e,i,this,s):this.handleDefaultSlideTransition(t,e,i,s)},getDimensions:function(){return{width:n.width(this.el),height:n.height(this.el)}},resize:function(){n.css(this.el,{height:n.height(this.container)}),this.slides.active&&this.slides.active.resize()},show:function(t,e){if(!(this.props.checkSlidesTransitionInProgress&&this.slidesTransitionInProgress||this.slides.isActive(t))){var i=this.slides.active;this.slides.setActive(t),this.handleSlidesTransition(i,t,e)}},first:function(){this.show(this.slides.get(0))},next:function(){this.show(this.slides.getNext(),"next")},prev:function(){this.show(this.slides.getPrev(),"prev")}},s),e.exports=r},{"./events":1,"./slides":7,underscore:10}],10:[function(t,e,i){!function(t){"object"==typeof e&&e.exports?e.exports=t():("undefined"==typeof window.webit&&(window.webit={}),window.webit._=t())}(function(){var t;return{jQuery:function(e){t=e},bind:function(t,e){return function(){return t.apply(e,arguments)}},clone:function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},delay:function(t,e,i){e=e||0,i&&(t=this.bind(t,i)),window.setTimeout(t,e)},debounce:function(t,e,i){var n=0;return function(){window.clearTimeout(n),n=window.setTimeout(function(){t.apply(i)},e)}},times:function(t,e,i){for(var n=0;e>n;n++)t.apply(i,[n])},after:function(t,e){var i=0;return function(){i++,i==t&&e()}},each:function(t,e,i){i=i||this;for(var n in t)if(e.apply(i,[t[n]])===!1)break},ranger:function(t,e,i,n){null==e&&(e=t||0,t=0),step=t>e?-1:1,n=n||this;for(var s=Math.max(Math.ceil((e-t)/step),0),o=Array(s),r=0;s>r;r++,t+=step)"function"==typeof i&&o.push(i.call(n,t));return o},normalizeIndex:function(t,e){return t%=e,0>t?e+t:t},getArguments:function(t,e){for(var i=[],n=t;n<e.length;n++)i.push(e[n]);return i},checkBoundry:function(t,e,i){return 0>t?t=i?e-1:0:t>=e&&(t=i?0:e-1),t},addClass:function(e,i){t(e).addClass(i)},removeClass:function(e,i){t(e).removeClass(i)},append:function(e,i){t(i).appendTo(e)},remove:function(e){t(e).remove()},createEl:function(e){return t("<"+e+"/>").get(0)},css:function(e,i){t(e).css(i)},attr:function(e,i,n){t(e).attr(i,n)},width:function(e){return t(e).width()},height:function(e){return t(e).height()},on:function(e,i,n){t(e).on(i,n)},extend:function(e,i){return t.extend(e,i)}}})},{}]},{},[2])(2)});